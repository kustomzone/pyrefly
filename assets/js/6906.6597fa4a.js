"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[6906],{16906:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_PYTHON_PROGRAM:()=>v,default:()=>_});var r=n(96540),o=n(20053),s=n(68553),i=n(32992);const l={tryEditorConfig:"tryEditorConfig_lNwA",tryEditorConfigInputCell:"tryEditorConfigInputCell_ThZ4",tryEditorConfigLabelCell:"tryEditorConfigLabelCell_jXtz",tryEditorConfigLabel:"tryEditorConfigLabel_ruTI",resetBanner:"resetBanner_IXky",tryEditor:"tryEditor_B2OJ",codeEditorContainer:"codeEditorContainer_py6s",shareButton:"shareButton_wml3",shareButtonText:"shareButtonText_g90U",shareButtonCopied:"shareButtonCopied_R3Mf",copySuccess:"copySuccess_RchJ",buttonText:"buttonText_IXXQ",results:"results_KSyo",resultsToolbar:"resultsToolbar_rkLS",resultsContainer:"resultsContainer_Y_ry",resultBody:"resultBody_koL7",tabs:"tabs_YEwe",tab:"tab_DHai",version:"version_hX_l",versionWarning:"versionWarning_i55S",selectedTab:"selectedTab_QpO4",loader:"loader_FV2w","sk-bouncedelay":"sk-bouncedelay_CcPK",bounce1:"bounce1_dV8o",bounce2:"bounce2_JDjO",errors:"errors_Fw83",msgHighlight:"msgHighlight__B1C",msgType:"msgType_Q6Dw",refinedValueDecoration:"refinedValueDecoration_FYE0",errorMessageError:"errorMessageError_o837"};var a=n(74848);function u(e){let{error:t,goToDef:n}=e;const{startLineNumber:r,startColumn:o,endLineNumber:s,endColumn:i}=t;let u;u=r===s?o===i?`${r}:${o}`:`${r}:${o}-${i}`:`${r}:${o}-${s}:${i}`;const d=`${u}: ${t.message} [${t.kind}]`;return(0,a.jsxs)("span",{className:l.msgType,onClick:()=>n(r,o,s,i),children:[(0,a.jsx)("span",{className:l.errorMessageError,children:"ERROR "}),d]})}function d(e){let{loading:t,goToDef:n,errors:r,internalError:s}=e;return(0,a.jsxs)("div",{id:"tryPyrefly-results-container",className:l.resultsContainer,children:[(0,a.jsx)("div",{className:l.resultsToolbar,children:(0,a.jsx)("ul",{className:l.tabs,children:(0,a.jsx)("li",{className:(0,o.default)(l.tab,l.selectedTab),children:"Errors"})})}),(0,a.jsxs)("div",{className:l.results,children:[t&&(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:l.loader,children:[(0,a.jsx)("div",{className:l.bounce1}),(0,a.jsx)("div",{className:l.bounce2}),(0,a.jsx)("div",{})]})}),!t&&(0,a.jsx)("pre",{className:(0,o.default)(l.resultBody,l.errors),children:(0,a.jsx)("ul",{children:s?(0,a.jsxs)("li",{children:["Pyrefly encountered an internal error:"," ",s,"."]}):null==r?(0,a.jsx)("li",{children:"Pyrefly failed to fetch errors."}):0===r?.length?(0,a.jsx)("li",{children:"No errors!"}):r.map(((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(u,{error:e,goToDef:n},t)},t)))})})]})]})}var c=n(84138);const h=(e,t)=>{throw"not implemented"},g=new Map;const f=(e,t)=>null,m=new Map;const p=(e,t)=>null,y=new Map;const b=()=>[],C=new Map;c.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),c.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,t){try{const n=g.get(e)??h;return{suggestions:n(t.lineNumber,t.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(n){return console.error(n),null}}}),c.languages.registerDefinitionProvider("python",{provideDefinition(e,t){try{const n=(m.get(e)??f)(t.lineNumber,t.column);return null!=n?{uri:e.uri,range:n}:null}catch(n){return console.error(n),null}}}),c.languages.registerHoverProvider("python",{provideHover:(e,t)=>(y.get(e)??p)(t.lineNumber,t.column)}),c.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(C.get(e)??b)(),dispose:()=>{}})}),s.wG.config({monaco:c});const v='\nfrom typing import *\n\ndef test(x: int):\n  return f"{x}"\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n'.trimStart(),w=("undefined"!=typeof window?n.e(6370).then(n.bind(n,96370)):new Promise((e=>{}))).then((async e=>(await e.default(),e))).catch((e=>console.log(e)));function _(e){let{sampleFilename:t,isCodeSnippet:n=!1,codeSample:s=v}=e;const i=(0,r.useRef)(null),[u,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(""),[b,_]=(0,r.useState)(!0),[E,j]=(0,r.useState)(null),[S,T]=(0,r.useState)(null),[L,P]=(0,r.useState)(null),[B,M]=(0,r.useState)(!1);function R(){if(null==L||null==E)return;L.getValue();!function(e,t){g.set(e,t)}(L,((e,t)=>E.autoComplete(e,t))),function(e,t){m.set(e,t)}(L,((e,t)=>E.gotoDefinition(e,t))),function(e,t){y.set(e,t)}(L,((e,t)=>E.queryType(e,t))),function(e,t){C.set(e,t)}(L,(()=>E.inlayHint()));try{E.updateSource(L.getValue());const e=E.getErrors();c.editor.setModelMarkers(L,"default",function(e){return e.map((e=>({startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:e.message,severity:e.severity})))}(e)),p(""),h(e)}catch(e){console.error(e),p(JSON.stringify(e)),h([])}}(0,r.useEffect)((()=>{_(!0),w.then((e=>{j(new e.State),_(!1),p("")})).catch((e=>{_(!1),p(JSON.stringify(e))}))}),[]),c.editor.onDidCreateModel((e=>{const n=x(t);P(n),R()})),(0,r.useEffect)((()=>{R()}),[E,L]);return(0,a.jsxs)("div",{id:"tryPyrefly-editor",className:l.tryEditor,children:[(0,a.jsxs)("div",{id:"tryPyrefly-code-editor-container",className:l.codeEditorContainer,children:[N(n,t,s,R,(function(e){const r=x(t);P(r),n&&T(Math.max(50,e.getContentHeight())),i.current=e}),S),!n&&(0,a.jsx)("button",{id:"share-url-button",className:(0,o.default)(l.shareButton,B&&l.shareButtonCopied),onClick:()=>function(e){const t=window.location.href;navigator.clipboard.writeText(t).then((()=>{e(!0),setTimeout((()=>e(!1)),2e3)}))}(M),"aria-label":"share URL button",children:(0,a.jsx)("span",{className:l.shareButtonText,children:B?"\u2713 URL Copied!":"\ud83d\udccb Share URL"})})]}),!n&&(0,a.jsx)(d,{loading:b,goToDef:(e,t,n,r)=>{const o=i.current;if(null===o)return;const s={startLineNumber:e,startColumn:t,endLineNumber:n,endColumn:r};o.revealRange(s),o.setSelection(s)},errors:u,internalError:f})]})}function x(e){const t=c.editor.getModels().filter((t=>t?.uri?.path===`/${e}`))[0];if(null==t)return null;const n=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search).get("code");return e?i.decompressFromEncodedURIComponent(e):null}();return null!=n&&null!=t&&t.setValue(n),t.setValue(t.getValue()),t.updateOptions({tabSize:4,insertSpaces:!0}),t}function N(e,t,n,r,o,l){if(e)return(0,a.jsx)(s.Ay,{defaultPath:t,defaultValue:n,defaultLanguage:"python",theme:"vs-light",onChange:r,onMount:o,keepCurrentModel:!0,height:l,options:{readOnly:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const e=window.innerHeight,l=document.querySelector(".navbar"),u=75*(e-(l?.offsetHeight||0))/100;return(0,a.jsx)(s.Ay,{defaultPath:t,defaultValue:n,defaultLanguage:"python",theme:"vs-light",onChange:e=>{r(),"string"==typeof e&&function(e){const t=i.compressToEncodedURIComponent(e),n=`${window.location.pathname}?code=${t}`;window.history.replaceState({},"",n)}(e)},onMount:o,keepCurrentModel:!0,height:u,options:{minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}}}]);